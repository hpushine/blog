<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="前端知识为主的个人博客，分享一些学习的思路和经历！"><title>前端代码素养 | 蓝天</title><link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/blog/favicon.ico"><link rel="apple-touch-icon" href="/blog/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/blog/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">前端代码素养</h1><a id="logo" href="/blog/.">蓝天</a><p class="description">hpuNet的博客</p></div><div id="nav-menu"><a class="current" href="/blog/."><i class="fa fa-home"> 首页</i></a><a href="/blog/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/blog/about/"><i class="fa fa-user"> 关于</i></a><a href="https://github.com/hpushine"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">前端代码素养</h1><div class="post-meta">Sep 9, 2018<span> | </span><span class="category"><a href="/blog/categories/感悟思考/">感悟思考</a></span></div><div class="post-content"><h3 id="破窗理论"><a href="#破窗理论" class="headerlink" title="破窗理论"></a>破窗理论</h3><p>破窗理论，原义指窗户破损了，建筑无人照管，人们放任窗户继续破损，最终自己也参与破坏活动，在外墙上涂鸦，任垃圾堆积，最后走向倾颓。破窗理论在实际中非常容易出现，往往第一个人的代码写的不好，第二个人就会有类似“反正他已经写成这样了，那我也只能这样了”的思想，导致代码越维护越冗杂，最后一刻轰然坍塌，变成无人想去维护的垃圾。</p>
<h3 id="整洁的代码"><a href="#整洁的代码" class="headerlink" title="整洁的代码"></a>整洁的代码</h3><p>整洁的代码如同优美的散文，试想读过的一本好书，能够随着作者的笔锋跌宕起伏，充满了画面感，调动了自己的喜怒哀乐。代码虽然没有那样的高潮迭起，但整洁的代码应当充满张力，能够在某一时刻利用这种张力将情节推向高潮。写代码类比于写文章讲故事，写代码是创作的过程，作者需要将自己想表达的东西通过代码的形式展现出来，而整洁的代码如同讲故事一般，娓娓道来，引人入胜，不好的代码则让人感觉毫无头绪，通篇不知道在讲什么。</p>
<h3 id="整洁代码原则"><a href="#整洁代码原则" class="headerlink" title="整洁代码原则"></a>整洁代码原则</h3><p>在现代化的前端开发中，有很多自动化工具可以帮助我们写出规范的代码，如eslint，tslint等各种辅助校验工具，知名的规范如google规范、airbnb规范等等也从各个细节方面约束，帮助我们形成合理规范的代码风格。根据实际重构项目，总结出一系列开发过程中需要时刻注意的原则，按照重要程度优先级排列。</p>
<h4 id="1-DRY-Don’t-Repeat-Yourself"><a href="#1-DRY-Don’t-Repeat-Yourself" class="headerlink" title="1. DRY(Don’t Repeat Yourself)"></a>1. DRY(Don’t Repeat Yourself)</h4><p>相信大家都听说过最基本的DRY原则，很多设计模式，包括面向对象本身，都是在这条原则上做努力。DRY顾名思义，是指“不要重复自己”，它实际上强调了一个抽象性原则，如果同样或类似的代码片段出现了两次以上，那么应该将它抽象成一个通用方法或文件，在需要使用的地方去依赖引入，确保在改动的时候，只需调整一处，所有的地方都改变过来，而不是到每个地方去找到相应的代码来修改。<br>在实际工作中，我见过两种在这条原则上各自走向极端的代码：</p>
<ul>
<li><p>一种是完全没有抽象概念，重复的代码散落在各处，更奇葩的是，有一部分的抽象，但更多的是重复，比如在common下抽取了一个data.js的数据处理文件，部分页面中引用了该文件，而更多页面完全拷贝了该文件中的几个不同方法代码。而作者的意图则是令人啼笑皆非——只用到小部分代码，没必要引入那么整个文件。且不论现代化的前端构建层面可以解决这个问题，即使是引入了整个大文件，这部分多余的代码在gzip之后也不会损失多少性能，但这种到处copy的行为带来后续的维护成本是翻倍的。</p>
</li>
<li><p>对于这种行为还遇到另外一个理由，就是工期时间短，改不动之前的代码，怕造成外网问题，那就拷贝一份相同的逻辑来修改。比如支付逻辑，原有的逻辑为单独的UI浮层+单个支付购买，现在产品提出“打包购买”需求，原有的代码逻辑又比较复杂，出现了“改不动”的现象，于是把UI层和购买逻辑的几个文件整个拷贝过来，修改几下，形成了新的“打包购买”模块，后来产品又提出“按条购买”，按照上述”改不动“原则，又拷贝了一份“按条购买”的模块。这样一来调用处的逻辑就会冗余重复，需要根据不同的购买方式引入不同UI组件和支付逻辑，另外如果新添需求，如支持“分期付款”，那么将改动的是非常多的文件，最可悲的是，最后想要把代码重构为一处统一调用的人，将会面对三份“改不动”的压力，需要众多逻辑中对比分析提取相同之处，工作量已经不能用翻倍来衡量，而这种工作量往往无法得到产品的认同和理解。</p>
</li>
<li><p>另一种极端是过度设计，在写每个逻辑的时候都去抽象，让代码的可读性大大下降，一个简单的for循环都要复用，甚至变量定义，这种代码维护起来也是比较有成本的，还有将迥然不同的逻辑过度抽象，使得抽象方法变得非常复杂，经常“牵一发而动全身”，这种行为也是不可取的。</p>
</li>
</ul>
<p>这也是将该原则排在首位的原因，这种行为导致的重构工作量是最大的，保持良好的代码维护性是一种素养，更是一种责任，如果自己在这方面逃避或偷懒，将把这块工作量翻倍地加在将来别人或自己的身上。</p>
<h4 id="2-SRP-Single-Responsibility-Principle"><a href="#2-SRP-Single-Responsibility-Principle" class="headerlink" title="2. SRP(Single Responsibility Principle)"></a>2. SRP(Single Responsibility Principle)</h4><p>SRP也是一个比较著名的设计原则——单一职责，在面向对象的编程中，认为类应该具有单一职责，一个类的改变动机应当只有一个。<br>对于前端开发来说，最需要贯彻的思想是函数应当保持单一职责，一个函数应当只做一件事，这样一来是保证函数的可复用性，更单一的函数有更强的复用性，二来可以让整体的代码框架更加清晰，细节都封装在一个个小函数中。另外一点也和单一职责有关，就是无副作用的函数，也称纯函数，我们应当尽量保证纯函数的数量，非纯函数是不可避免的，但应当尽量减少它。<br>把SRP原则排在第二位，因为它非常的重要，没有人愿意看一团乱麻的逻辑，在维护代码时，如果没有一个清晰的逻辑结构，所有的数据定义、数据处理、DOM操作等等一系列细节的代码全部放在一个函数中，导致这个函数非常的冗长，让人本能地产生心理排斥，不愿去查看内部的逻辑。</p>
<h4 id="3-LKP-Least-Knowledge-Principle"><a href="#3-LKP-Least-Knowledge-Principle" class="headerlink" title="3. LKP(Least Knowledge Principle)"></a>3. LKP(Least Knowledge Principle)</h4><p>LKP原则是最小知识原则，又称“迪米特”法则，也就是说，一个对象应该对另一个对象有最少的了解，你内部如何复杂都没关系，我只关心调用的地方。</p>
<h4 id="4-可读性基本定理"><a href="#4-可读性基本定理" class="headerlink" title="4. 可读性基本定理"></a>4. 可读性基本定理</h4><p>可读性基本定理——“代码的写法应当使别人理解它所需的时间最小化”。<br>代码风格和原则不是一概而论的，我们经常需要对一些编码原则和方案进行取舍，例如对于三元表达式的取舍，当我们觉得两种方案都占理时，那么唯一的评判标准就是可读性基本定理，无论写法多么的高超炫技，最好的代码依旧是让人第一时间能够理解的代码。</p>
<h4 id="5-有意义的命名"><a href="#5-有意义的命名" class="headerlink" title="5. 有意义的命名"></a>5. 有意义的命名</h4><p>代码的可读性绝大部分依赖于变量和函数的命名，一个好的名称能够一针见血地帮助维护者理解逻辑，如同写文章中的“文笔”，文笔优异者总能将故事娓娓道来，引人入胜。<br>不过要起好名称还是很难的，尤其是我们不是以英语为母语，更是添加了一层障碍，有些人认为纠结在名称上会导致效率变低，开发第一时间应该完成需求的开发。这样说并没有错，我们在开发过程中应当专注于功能逻辑，但不要完全忽视命名，所谓“文笔”是需要锻炼的，思考的越多，命名就会愈加的水到渠成，到后来也就不太会影响工作效率了。<br>在这里推荐鲍勃大叔提到的童子军规，每一次看自己的代码，都进行一次重构，最简单的重构便是改名，也许一开始觉得命名还比较贴合，但逻辑越写越不符合初始的命名了，当回顾代码时，我们可以顺手对变量和方法进行重新命名，现代编辑工具也很容易做到这一点。</p>
<h4 id="6-适当的注释维护"><a href="#6-适当的注释维护" class="headerlink" title="6. 适当的注释维护"></a>6. 适当的注释维护</h4><p>注释是一个比较有争议性的话题，有人认为可读的函数变量就很清晰，不需要额外的注释，且注释有不可维护性，适当的注释是有必要的，对于复杂的逻辑，如果有一个简练的注释，对于代码可读性的帮助是极大的，但有些不必要的注释可以去掉，注释的取舍关键在于可读性基本定理</p>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>这里提到的6个代码编写的原则，前三个偏向于代码维护性，后三个偏向于代码可读性，整个可维护性和可读性构成了代码的基本素养。作为一名前端开发工程师，想要拥有良好的代码素养，首先要让自己的代码可维护，不给别人的维护带来巨大的成本和工作量，其次尽量保证代码的美观可读，整洁的代码人见人爱，如同阅读一本好书，令人心情愉悦。</p>
</div><div class="tags"><a href="/blog/tags/skill-thinking/">skill thinking</a></div><div class="post-nav"><a class="pre" href="/blog/2018/09/21/技术成长发展/">技术成长发展</a><a class="next" href="/blog/2018/08/11/JavaScript数组/">JavaScript数组</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Javascript/">Javascript</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/实践教程/">实践教程</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/性能优化/">性能优化</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/感悟思考/">感悟思考</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/blog/tags/git/" style="font-size: 15px;">git</a> <a href="/blog/tags/grammer/" style="font-size: 15px;">grammer</a> <a href="/blog/tags/cache/" style="font-size: 15px;">cache</a> <a href="/blog/tags/Array/" style="font-size: 15px;">Array</a> <a href="/blog/tags/skill-thinking/" style="font-size: 15px;">skill thinking</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2018/09/21/技术成长发展/">技术成长发展</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/09/09/前端代码素养/">前端代码素养</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/08/11/JavaScript数组/">JavaScript数组</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/06/06/Git命令大全/">git命令大全</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/05/30/JS字符串和Array方法总结/">JS字符串和Array方法</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/05/15/JavaScript难点/">Javascript难点</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/05/06/服务器集群和负载均衡/">集群和负载均衡</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/04/26/git简要教程/">git简要教程</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/04/20/移动端H5缓存/">移动端H5缓存</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2018/04/03/Web缓存机制/">Web缓存机制</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://jingchao.xyz/jsgarden/zh/" title="JS秘密花园" target="_blank">JS秘密花园</a><ul></ul><a href="http://javascript.ruanyifeng.com/" title="JS教程" target="_blank">JS教程</a><ul></ul><a href="http://es6.ruanyifeng.com/" title="ES6教程" target="_blank">ES6教程</a><ul></ul><a href="https://www.jianshu.com/p/37d16a63fbb9" title="Node教程" target="_blank">Node教程</a><ul></ul><a href="https://github.com/answershuto/learnVue" title="Vue源码" target="_blank">Vue源码</a><ul></ul><a href="http://www.dailichun.com/" title="撒网要见鱼" target="_blank">撒网要见鱼</a><ul></ul><a href="http://www.ruanyifeng.com/blog/" title="阮一峰博客" target="_blank">阮一峰博客</a><ul></ul><a href="http://www.bejson.com/" title="在线工具" target="_blank">在线工具</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/blog/." rel="nofollow">蓝天 |</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/blog/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/blog/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/blog/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/blog/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/blog/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/blog/js/smartresize.js?v=0.0.0"></script></div></body></html>